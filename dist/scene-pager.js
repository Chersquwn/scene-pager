!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.ScenePager=i():t.ScenePager=i()}(this,function(){return function(t){function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}var e={};return i.m=t,i.c=e,i.i=function(t){return t},i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},i.p="",i(i.s=0)}([function(t,i,e){"use strict";function n(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(i,e,n){return e&&t(i.prototype,e),n&&t(i,n),i}}(),s={ease:function(t){return Math.sqrt(1-Math.pow(t-1,2))}},r=function(){function t(i){var e=i.touchEl,o=i.moveEl,r=i.items,h=i.speed,u=void 0===h?400:h,a=i.bounce,c=void 0!==a&&a,l=i.loop,d=void 0!==l&&l,f=i.autorun,v=void 0!==f&&f,p=i.duration,x=void 0===p?5e3:p,y=i.easing,m=void 0===y?"ease":y,g=i.direction,b=void 0===g?"horizontal":g,E=i.touchStart,P=void 0===E?function(){}:E,k=i.touchMove,M=void 0===k?function(){}:k,w=i.touchEnd,S=void 0===w?function(){}:w,j=i.animationEnd,q=void 0===j?function(){}:j;n(this,t),this.touchEl=document.querySelector(e),this.moveEl=document.querySelector(o),this.items=document.querySelectorAll(r),this.speed=u,this.bounce=c,this.loop=d,this.autorun=v,this.duration=x,this.easing="function"==typeof m?m:s[m],this.direction="horizontal"===b,this.touchStart=P,this.touchMove=M,this.touchEnd=S,this.animationEnd=q,this.currentPos=0,this.index=0,this.length=this.items.length,this.animating=!1,this.running=!1,this.event={},this.raf=null,this.interval=null;var F=this.touchEl.getBoundingClientRect();this.rectValue=this.direction?F.right-F.left:F.bottom-F.top,this.touchEl.addEventListener("touchstart",this.start.bind(this)),this.touchEl.addEventListener("touchmove",this.move.bind(this)),this.touchEl.addEventListener("touchend",this.end.bind(this)),this.autorun&&this.run()}return o(t,[{key:"start",value:function(t){var i=t.touches[0];this.x1=this.x2=i.pageX,this.y1=this.y2=i.pageY,this.isFirstMove=!0,this.stop(),t.x=this.x1,t.y=this.y1,t.index=this.index,this.touchStart(t)}},{key:"move",value:function(t){var i=t.touches[0],e=i.pageX,n=i.pageY;if(this.isFirstMove){var o=Math.abs(this.x1-e)-Math.abs(this.y1-n);o>0&&this.direction||o<0&&!this.direction?this.locked=!0:this.locked=!1,this.isFirstMove=!1}if(this.locked){t.preventDefault();var s=e-this.x2,r=n-this.y2,h=this.direction?s:r;this.loop||(this.currentPos>=0&&h>0||this.currentPos<=-(this.length-1)*this.rectValue&&h<0)&&(this.bounce?h*=.2:h=0),this.currentPos+=h,this.x2=e,this.y2=n,t.x=this.x2,t.y=this.y2,t.index=this.index,this.translateTo(this.currentPos),this.touchMove(t)}}},{key:"end",value:function(t){if(this.locked){var i=this.x2-this.x1,e=this.y2-this.y1,n=.3*this.rectValue,o=this.direction?i:e,s=this.index;this.loop?o>=n?s=this.index-1:o<=-n&&(s=this.index+1):this.currentPos<0&&this.currentPos>-(this.length-1)*this.rectValue&&(o>=n?s=this.index-1:o<=-n&&(s=this.index+1)),t.x=this.x2,t.y=this.y2,t.index=s,this.touchEnd(t),this.to(s)}}},{key:"translateTo",value:function(t){this.moveEl.style.transform=this.moveEl.style.webkitTransform=this.direction?"translate3d("+t+"px, 0, 0)":"translate3d(0, "+t+"px, 0)"}},{key:"to",value:function(t){var i=this,e=Date.now(),n=(this.index,-t*this.rectValue),o=this.currentPos,s=n-o;this.animating=!0,this.index=t,i.event.index=t,function t(){var r=Date.now()-e;if(r>=i.speed)return i.animationEnd(i.event),i.animating=!1,void(i.autorun&&!i.running&&i.run());i.currentPos=s*i.easing(r/i.speed)+o,Math.abs(r-i.speed)<20&&(i.currentPos=n),i.translateTo(i.currentPos),i.raf=requestAnimationFrame(t)}()}},{key:"stop",value:function(){clearInterval(this.interval),cancelAnimationFrame(this.raf),this.running=!1}},{key:"run",value:function(){var t=this;this.running=!0,this.interval=setInterval(function(){t.to((t.index+1)%t.length)},this.duration)}}]),t}();i.default=r}])});