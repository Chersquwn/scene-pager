!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ScenePager=e():t.ScenePager=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var i={};return e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o={ease:function(t){return Math.sqrt(1-Math.pow(t-1,2))}},r=function(){function t(e){var i=e.touchEl,s=e.moveEl,r=e.items,h=e.speed,u=void 0===h?400:h,a=e.bounce,c=void 0!==a&&a,l=e.loop,d=void 0!==l&&l,v=e.autorun,f=void 0!==v&&v,p=e.duration,x=void 0===p?5e3:p,y=e.easing,m=void 0===y?"ease":y,g=e.direction,P=void 0===g?"horizontal":g,b=e.touchStart,E=void 0===b?function(){}:b,k=e.touchMove,q=void 0===k?function(){}:k,M=e.touchEnd,w=void 0===M?function(){}:M,I=e.animationStart,S=void 0===I?function(){}:I,j=e.animationEnd,T=void 0===j?function(){}:j;n(this,t),this.touchEl=document.querySelector(i),this.moveEl=document.querySelector(s),this.items=document.querySelectorAll(r),this.speed=u,this.bounce=c,this.loop=d,this.autorun=f,this.duration=x,this.easing="function"==typeof m?m:o[m],this.direction="horizontal"===P,this.touchStart=E,this.touchMove=q,this.touchEnd=w,this.animationStart=S,this.animationEnd=T,this.currentPos=0,this.index=0,this.prevIndex=0,this.length=this.items.length,this.animating=!1,this.running=!1,this.event={},this.raf=null,this.interval=null,this.queue=[];var V=this.touchEl.getBoundingClientRect();if(this.rectValue=this.direction?V.right-V.left:V.bottom-V.top,this.lower=-(this.length-1)*this.rectValue,this.upper=0,this.touchEl.addEventListener("touchstart",this.start.bind(this)),this.touchEl.addEventListener("touchmove",this.move.bind(this)),this.touchEl.addEventListener("touchend",this.end.bind(this)),this.autorun&&this.run(),this.loop){for(var F=0;F<this.length;F++)F===this.length-1?this.queue.push(-1):this.queue.push(F);this.adjustPosition()}}return s(t,[{key:"start",value:function(t){var e=t.touches[0];this.x1=this.x2=e.pageX,this.y1=this.y2=e.pageY,this.isFirstMove=!0,this.stop(),t.startX=this.x1,t.startY=this.y1,t.index=this.index,this.touchStart(t)}},{key:"move",value:function(t){var e=t.touches[0],i=e.pageX,n=e.pageY;if(this.isFirstMove){var s=Math.abs(this.x1-i)-Math.abs(this.y1-n);s>0&&this.direction||s<0&&!this.direction?this.locked=!0:this.locked=!1,this.isFirstMove=!1}if(this.locked){t.preventDefault();var o=i-this.x2,r=n-this.y2,h=this.direction?o:r;this.loop||(this.currentPos>=this.upper&&h>0||this.currentPos<=this.lower&&h<0)&&(this.bounce?h*=.2:h=0),this.currentPos+=h,this.x2=i,this.y2=n,t.startX=this.x1,t.startY=this.y1,t.x=this.x2,t.y=this.y2,t.index=this.index,t.prevIndex=this.prevIndex,t.currentPos=this.currentPos,this.translateTo(this.currentPos),this.touchMove(t)}}},{key:"end",value:function(t){if(this.locked){var e=this.x2-this.x1,i=this.y2-this.y1,n=.3*this.rectValue,s=this.direction?e:i,o=this.index;this.loop?s>=n?o=(this.index-1+this.length)%this.length:s<=-n&&(o=(this.index+1+this.length)%this.length):this.currentPos<this.upper&&this.currentPos>this.lower&&(s>=n?o=this.index-1:s<=-n&&(o=this.index+1)),t.startX=this.x1,t.startY=this.y1,t.x=this.x2,t.y=this.y2,t.index=o,t.prevIndex=this.prevIndex,t.currentPos=this.currentPos,this.touchEnd(t),this.to(o)}}},{key:"translateTo",value:function(t){this.moveEl.style.transform=this.moveEl.style.webkitTransform=this.direction?"translate3d("+t+"px, 0, 0)":"translate3d(0, "+t+"px, 0)"}},{key:"to",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this,n=Date.now(),s=t-this.index;s<=-(this.length-1)?s+=this.length:s>=this.length-1&&(s-=this.length);var o=this.loop?-s*this.rectValue:-t*this.rectValue,r=this.currentPos,h=o-r;this.animating=!0,this.event.prevIndex=this.prevIndex=this.index,this.event.index=this.index=t,e?(this.animationStart(this.event),function t(){var e=Date.now()-n;if(e>=i.speed)return i.event.index!==i.event.prevIndex&&(i.loop&&(s>0?i.queue.unshift(i.queue.pop()):i.queue.push(i.queue.shift()),i.adjustPosition(),i.currentPos=0,i.translateTo(i.currentPos)),i.animationEnd(i.event)),void(i.autorun&&!i.running&&i.run());i.currentPos=h*i.easing(e/i.speed)+r,Math.abs(e-i.speed)<20&&(i.currentPos=o),i.translateTo(i.currentPos),i.raf=requestAnimationFrame(t)}()):(i.currentPos=o,i.translateTo(i.currentPos))}},{key:"stop",value:function(){clearInterval(this.interval),!this.loop&&cancelAnimationFrame(this.raf),this.running=!1,this.event.prevIndex=this.prevIndex,this.event.index=this.index,this.animating&&this.animationEnd(this.event)}},{key:"run",value:function(){var t=this;this.running=!0,this.interval=setInterval(function(){t.to((t.index+1)%t.length)},this.duration)}},{key:"adjustPosition",value:function(){var t=this;this.queue.forEach(function(e,i){t.items[i].style.transform=t.items[i].style.webkitTransform=t.direction?"translate3d("+e*t.rectValue+"px, 0, 0)":"translate3d(0, "+e*t.rectValue+"px, 0)"})}}]),t}();e.default=r}])});